# ğŸš€ Projet d'Automatisation de la SÃ©curitÃ© et du Patch Management avec Ansible

Ce projet utilise **Ansible** pour automatiser la gestion des vulnÃ©rabilitÃ©s, des patchs de sÃ©curitÃ© et des configurations SSH sur des serveurs. Il s'agit d'une solution pour appliquer des **patchs de sÃ©curitÃ©** sur des systÃ¨mes **Debian/Ubuntu** et **CentOS/RHEL**, de **sÃ©curiser l'accÃ¨s SSH**, et de **scanner les vulnÃ©rabilitÃ©s** Ã  l'aide de **OpenSCAP**. Ce playbook est conÃ§u pour Ãªtre utilisÃ© en **environnement de production**.

## ğŸ¯ Objectifs du Projet

- ğŸ”’ **SÃ©curiser l'accÃ¨s SSH** : CrÃ©er un utilisateur sÃ©curisÃ© (`secadmin`), dÃ©sactiver l'accÃ¨s SSH pour `root`, et limiter l'accÃ¨s aux utilisateurs autorisÃ©s.
- ğŸ›¡ï¸ **Scanner les vulnÃ©rabilitÃ©s** : Utiliser **OpenSCAP** pour scanner les vulnÃ©rabilitÃ©s de sÃ©curitÃ© et afficher les rÃ©sultats dÃ©taillÃ©s.
- ğŸ”„ **Appliquer des patchs de sÃ©curitÃ©** : Mettre Ã  jour les paquets de sÃ©curitÃ© sur les serveurs sans interfÃ©rer avec les configurations en production.
- ğŸ”„ **RedÃ©marrage conditionnel** : Ne redÃ©marrer que les services nÃ©cessaires, comme `sshd`, si un redÃ©marrage est requis aprÃ¨s une mise Ã  jour.

## ğŸ› ï¸ PrÃ©requis

Avant d'exÃ©cuter ce playbook, assurez-vous que les Ã©lÃ©ments suivants sont installÃ©s sur votre machine et vos serveurs :

- Ansible (version 2.9 ou supÃ©rieure)
- OpenSCAP installÃ© sur les serveurs cibles (voir la tÃ¢che `tasks_install_openscap.yml`)
- AccÃ¨s SSH avec des droits sudo pour les utilisateurs cibles
- ClÃ© SSH publique pour l'utilisateur `secadmin` (ou une autre clÃ© valide)

## ğŸ” Structure du Projet

ansible-infrastructure-automation/ 

â”œâ”€â”€ inventory.ini # Fichier d'inventaire Ansible avec les hÃ´tes cibles

â”œâ”€â”€ playbook.yml # Playbook principal exÃ©cutant toutes les tÃ¢ches 

â”œâ”€â”€ tasks_install_openscap.yml # Installation d'OpenSCAP 

â”œâ”€â”€ tasks_security_patching.yml # Application des patchs de sÃ©curitÃ© 

â”œâ”€â”€ tasks_ssh_access.yml # Configuration de l'accÃ¨s SSH sÃ©curisÃ© 

â””â”€â”€ README.md # Documentation du projet


## âš™ï¸ DÃ©tails des TÃ¢ches

### 1. `tasks_install_openscap.yml`

Cette tÃ¢che installe **OpenSCAP** sur les serveurs cibles pour effectuer des scans de vulnÃ©rabilitÃ©s. Si OpenSCAP est dÃ©jÃ  installÃ©, la tÃ¢che passe cette Ã©tape.

### 2. `tasks_ssh_access.yml`

- **CrÃ©ation de l'utilisateur sÃ©curisÃ© (`secadmin`)** : Cet utilisateur a des privilÃ¨ges sudo et un shell Bash.
- **DÃ©sactivation de l'accÃ¨s SSH pour `root`** : EmpÃªche la connexion SSH en tant que `root`.
- **Limitation de l'accÃ¨s SSH** : L'accÃ¨s SSH est limitÃ© uniquement Ã  l'utilisateur `secadmin`.
- **Copie de la clÃ© SSH** : Copie une clÃ© SSH publique pour l'utilisateur `secadmin` afin d'Ã©viter l'utilisation de mots de passe.

### 3. `tasks_security_patching.yml`

- **Mise Ã  jour des paquets de sÃ©curitÃ©** :
  - Pour **Debian/Ubuntu**, seuls les paquets installÃ©s sont mis Ã  jour.
  - Pour **CentOS/RHEL**, seuls les paquets de sÃ©curitÃ© sont mis Ã  jour.
- **RedÃ©marrage conditionnel** : Si un redÃ©marrage est nÃ©cessaire (par exemple aprÃ¨s une mise Ã  jour du noyau), le playbook vÃ©rifie s'il faut redÃ©marrer les services (comme `sshd`), plutÃ´t que de redÃ©marrer complÃ¨tement le serveur.

## ğŸ“ Comment Utiliser ce Playbook

### 1. Clonez ce dÃ©pÃ´t

Clonez ce projet sur votre machine locale :

git clone https://github.com/AhmedSouai/projet_perso/
cd ansible-infrastructure-automation


## ğŸ›‘ Attention
Environnement de production : Bien que ce playbook soit conÃ§u pour Ãªtre utilisÃ© en production, il est recommandÃ© de le tester d'abord sur un environnement de staging pour Ã©viter toute interruption de service.

RedÃ©marrage des services : Le playbook redÃ©marre certains services comme sshd pour appliquer les mises Ã  jour de sÃ©curitÃ©, mais il n'effectue pas de redÃ©marrage complet des serveurs.

## ğŸ“„ License
Ce projet est sous la licence MIT. Vous pouvez librement l'utiliser, le modifier, et le distribuer selon les termes de cette licence.


